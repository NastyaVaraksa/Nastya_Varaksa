<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2</title>
    <style>
      .b{
        width: 100px;
        height: 200px;
        
      }


    </style>
</head>
<body>
<div class="b"></div>
<canvas id="canvas" width="600" height="400"></canvas>

<script>

let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");

let okTopRacketLeft = false;
let okBottomRacketLeft = false;
let okTopRacketRight = false;
let okBottomRacketRight = false;

let drawField = function(){
    ctx.fillStyle = "yellow";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

let circle = function(x, y, rad){
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(x, y, rad, 0, 6.28);
    ctx.fill()
}

let stop = function(){
    cancelAnimationFrame(myReq);
    ctx.font = "60px Arial";
    ctx.fillStyle = "red";
    ctx.fillText("Game over", canvas.width/2 - 150, canvas.height/2)
    stop = true;
}

class RacketLeft{
    constructor(x, y, width, height){
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
    }
    drawRacketLeft(){
        if(okTopRacketLeft === true && this.y > 0){
            this.y -= 5;
        }
        if(okBottomRacketLeft === true && this.y < canvas.height - this.height){
            this.y += 5;
        }
        ctx.fillStyle = "green";
        ctx.fillRect(this.x, this.y, this.width, this.height)
    }
}
class RacketRight{
    constructor(x, y, width, height){
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
    }
    drawRacketRight(){
        if(okTopRacketRight === true && this.y > 0){
            this.y -= 5;
        }
        if(okBottomRacketRight === true && this.y < canvas.height - this.height){
            this.y += 5;
        }
        ctx.fillStyle = "blue";
        ctx.fillRect(this.x, this.y, this.width, this.height)
    }
}

let myRacketLeft = new RacketLeft(0, canvas.height/2 - 50, 20, 100);
let myRacketRight = new RacketRight(canvas.width - 20, canvas.height/2 - 50, 20, 100);

class Ball{
    constructor(x, y, rad){
        this.x = x;
        this.y = y;
        this.rad = rad;
    }

    addX = 3;
    addY = 3;

    drawBall(){
        circle(this.x, this.y, this.rad);

        this.x += this.addX
        this.y += this.addY

        if(this.y + this.rad > canvas.height || this.y - this.rad < 0){
            this.addY = -this.addY
        }
    
        if((this.x + this.rad) > (canvas.width)){
            this.x = canvas.width - this.rad;
            this.y = this.y;
            
        // ball.speedX = -ball.speedX;
        // racket1.scores ++;
        // racket1.stopInterval = true;
        // setTimeout(start, 3000);
        // valueCountdown = 3;
        // countdownF(); // вызов функции
        }

        if((this.x + this.rad) > (canvas.width - myRacketRight.width) && (this.y + this.rad) < (myRacketRight.y + myRacketRight.height) && (this.y - this.rad) > myRacketRight.y){
             this.addX = -this.addX
         }
        if((this.x - this.rad) < myRacketLeft.width && (this.y + this.rad) < (myRacketLeft.y + myRacketLeft.height + 20) && (this.y - this.rad) > (myRacketLeft.y + 20)){
             this.addX = -this.addX
         }
        if(this.x + this.rad < 0){
            this.x + this.rad == 0;
            this.addX = -this.addX
        }

        if(this.y - this.rad > 500){
            stop()
        }
    }
}

let myBall = new Ball(canvas.width/2, canvas.height/2, 15)


let render = function(){
    if(stop === true){return};

    drawField();
    myRacketLeft.drawRacketLeft();
    myRacketRight.drawRacketRight();
    myBall.drawBall();
  
    myReq = requestAnimationFrame(render);
}

render();

addEventListener("keydown", function(event){
let newDirect = event.keyCode

if(newDirect === 16){
    okTopRacketLeft = true;
}
if(newDirect === 17){
    okBottomRacketLeft = true;
}

if(newDirect === 38){
    okTopRacketRight = true;
}
if(newDirect === 40){
    okBottomRacketRight = true;
}
});

addEventListener("keyup", function(event){
let newDirect = event.keyCode

if(newDirect === 16){
    okTopRacketLeft = false;
}
if(newDirect === 17){
    okBottomRacketLeft = false;
}

if(newDirect === 38){
    okTopRacketRight = false;
}
if(newDirect === 40){
    okBottomRacketRight = false;
}
})







// let canvas = document.getElementById("canvas");
// let ctx = canvas.getContext("2d");

// let okLeft = false;
// let okRigth = false;

// let drawRect = function(){
//     ctx.fillStyle = "yellow";
//     ctx.fillRect(0, 0, 400, 500);
// }

// let circle = function(x, y){
//     ctx.fillStyle = "red";
//     ctx.beginPath();
//     ctx.arc(x, y, 10, 0, 6.28);
//     ctx.fill()
// }

// let stop = function(){
//     cancelAnimationFrame(myReq);
//     ctx.font = "60px Arial";
//     ctx.fillStyle = "red";
//     ctx.fillText("Game over", 40, 200)
//     stop = true;
// }

// class Platform{
//     constructor(x, y){
//         this.x = x;
//         this.y = y;
//     }

//     drawPlatform(){
//         if(okLeft === true && this.x > 0){
//             this.x -= 5
//         }
//         if(okRigth === true && this.x < 300){
//             this.x += 5
//         }
//         ctx.fillStyle = "blue";
//         ctx.fillRect(this.x, this.y, 100, 20)
//     }
// }

// let myPlatf = new Platform(150, 480);

// class Ball{
//     constructor(x, y){
//         this.x = x;
//         this.y = y;
//     }

//     addX = 2;
//     addY = -3;

//     drawBall(){
//         circle(this.x, this.y);

//         this.x += this.addX
//         this.y += this.addY

//         if(this.x + 10 > 400){
//             this.addX = -this.addX
//         }
//         if(this.x - 10 < 0){
//             this.addX = -this.addX
//         }
//         if(this.y - 10 < 0){
//             this.addY = -this.addY
//         }
//         if(this.y + 10 === 480 && this.x + 10 > myPlatf.x && this.x -10 < myPlatf.x + 100){
//             this.addY = -this.addY
//         }

//         if(this.y -10 > 500){
//             stop()
//         }
//     }
// }

// let myBall = new Ball(200, 470)

// let render = function(){
//     if(stop === true){return};

//     drawRect();
//     myPlatf.drawPlatform();
//     myBall.drawBall();
//     // circle(200, 200);
//     myReq = requestAnimationFrame(render);
// }

// render();

// addEventListener("keydown", function(event){
// let newDirect = event.keyCode

// if(newDirect === 37){
//     okLeft = true;
// }
// if(newDirect === 39){
//     okRigth = true;
// }
// });

// addEventListener("keyup", function(event){
// let newDirect = event.keyCode

// if(newDirect === 37){
//     okLeft = false;
// }
// if(newDirect === 39){
//     okRigth = false;
// }
// })

</script>


    
</body>
</html>